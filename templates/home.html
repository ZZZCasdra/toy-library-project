{% extends "base.html" %}

{% block title %}Home - Toy Library{% endblock %}

{% block content %}

<!-- Hero / Intro -->
<section class="py-5 text-center bg-primary text-white" >
  <h1 class="display-6 mb-3">Welcome to the Toy Library</h1>
  <p class="lead mx-auto" style="max-width: 720px;">
    This is a public toy library website. You can browse, filter and borrow toys online; after returning them, you can also rate them to help other families make better choices when selecting toys.
  </p>

  <!-- 登录状态提示 -->
  <div class="mt-3">
    {% if current_user.is_authenticated %}
      <span class="badge text-bg-success">Logged in：{{ current_user.username }}</span>
    {% else %}
      <span class="badge text-bg-secondary">Not logged in: The borrowing function requires logging in first.</span>
    {% endif %}
  </div>

  <!-- 快速入口按钮 -->
<!--  <div class="mt-4">-->
<!--    <a href="{{ url_for('toys') }}" class="btn btn-primary me-2">Start browsing the toys</a>-->
<!--    {% if current_user.is_authenticated %}-->
<!--      <a href="{{ url_for('my_borrows') }}" class="btn btn-outline-primary me-2">My borrowing record</a>-->
<!--      {% if current_user.role == 'admin' %}-->
<!--        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-warning">Toy management</a>-->
<!--      {% endif %}-->
<!--    {% else %}-->
<!--      <a href="{{ url_for('login') }}" class="btn btn-outline-primary">Log in</a>-->
<!--    {% endif %}-->
<!--  </div>-->
</section>

<hr class="my-5">

<!-- 能做什么 -->
<section class="py-4">
  <h2 class="h4 mb-4 text-center">What can I do ?</h2>
  <div class="row g-4">
    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Browse and Filter</h5>
          <p class="card-text text-muted">Filter by toy type, age group, developmental skills to quickly find the suitable toys.</p>
          <a href="{{ url_for('toys') }}" class="btn btn-sm btn-primary">go!</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Borrow and Return</h5>
          <p class="card-text text-muted">Submit borrowing applications online, rate them upon return, and help improve the shared experience in the community.</p>
          {% if current_user.is_authenticated %}
            <a href="{{ url_for('my_borrows') }}" class="btn btn-sm btn-primary">My Borrow Records</a>
          {% else %}
            <a href="{{ url_for('login') }}" class="btn btn-sm btn-outline-primary">Use after logging in</a>
          {% endif %}
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Toy management</h5>
          <p class="card-text text-muted">Administrators can add, edit and delete toys, and manage the inventory status and information.</p>
          {% if current_user.is_authenticated and current_user.role == 'admin' %}
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-sm btn-warning">Toy management</a>
          {% else %}
            <button class="btn btn-sm btn-outline-secondary" disabled>Administrators only</button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="my-5">

<!-- 热门/高评分玩具 -->
<section class="py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h4 mb-0">Popular toys / Highly-rated recommendations</h2>
    <a href="{{ url_for('toys') }}" class="btn btn-sm btn-outline-secondary">View All</a>
  </div>

  {% if featured_toys and featured_toys|length > 0 %}
    <div class="row g-4">
      {% for toy in featured_toys %}
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <a href="{{ url_for('toy_detail', toy_id=toy.toy_id) }}" class="text-decoration-none">
              <img src="{{ url_for('static', filename=toy.image) }}"
                   class="card-img-top"
                   alt="{{ toy.name }}"
                   style="height: 200px; object-fit: contain;">
            </a>
            <div class="card-body">
              <h5 class="card-title mb-1">{{ toy.name }}</h5>
              <p class="text-muted mb-2">
                {{ toy.toy_type }} · {{ toy.age_range }}
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <span class="small">
                  Rating:
                  {% if toy.rating %}
                    <strong>{{ "%.2f"|format(toy.rating) }}</strong>/5
                  {% else %}
                    <span class="text-muted">No information</span>
                  {% endif %}
                </span>
                <a href="{{ url_for('toy_detail', toy_id=toy.toy_id) }}" class="btn btn-sm btn-primary">Detail</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-light border">
      There are no recommended toys at present. Please go to the "Browse Toys" page to view all the contents
    </div>
  {% endif %}
</section>

{% endblock %}


